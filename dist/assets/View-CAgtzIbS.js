import{C as f,i as y,j,h as F,k as W,f as i,o as t,a as o,w as u,b as r,l as X,g as c,t as I,v as Z,e as v,u as s,c as p,F as b,p as L}from"./app-ktTZm4lV.js";import{_ as ee}from"./AuthenticatedLayout-_mDoENMS.js";import x from"./TabItem-Jo_A5zat.js";import te from"./InviteUserModal-AKdFfSSw.js";import{_ as M}from"./UserListItem-B6YUi0C5.js";import{_ as oe}from"./TextInput-BJ1RQ3E7.js";import{_ as re}from"./GroupForm-BxmbJhRC.js";import{_ as se}from"./PostList-Blv-YevP.js";import{_ as le}from"./CreatePost-Bd37C1G-.js";import{_ as ae}from"./PrimaryButton-DONOzyJS.js";import{_ as S}from"./PostModal-DOhXdX-p.js";import{r as D}from"./transition-CcRS158C.js";import{r as N,a as ue,m as ne,p as ie,x as k,I as ce,y as w}from"./tabs-BNOirL-K.js";import"./ApplicationLogo-CyEEynhf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./BaseModal-tc47qXzZ.js";import"./Checkbox-D5rN4bQ7.js";import"./AttachmentPreviewModal-DcEB-VJa.js";const de={class:"max-w-[768px] mx-auto h-full overflow-auto"},pe={class:"px-4"},me={key:0,class:"my-2 py-2 px-3 font-medium text-sm bg-red-400 text-white"},ge={class:"group relative bg-white dark:bg-black dark:text-gray-100"},fe=["src"],ve={key:0,class:"absolute top-2 right-2"},he={key:0,class:"bg-gray-50 hover:bg-gray-100 text-gray-800 rounded py-2 px-3 text-xs flex items-center opacity-0 group-hover:opacity-100"},ye={key:1,class:"flex gap-2 bg-white p-2 opacity-0 group-hover:opacity-100"},be={class:"flex"},xe={class:"flex items-center justify-center relative group/thumbnail -mt-[64px] ml-[48px] w-[128px] h-[128px] rounded-full"},ke=["src"],we={key:0,class:"absolute left-0 top-0 right-0 bottom-0 bg-black/50 text-gray-200 rounded-full opacity-0 flex items-center justify-center group-hover/thumbnail:opacity-100"},_e={key:1,class:"absolute top-1 right-0 flex flex-col gap-2"},Ce={class:"flex justify-between items-center flex-1 p-4"},je={class:"font-bold text-lg"},Se={class:"border-t m-4 pt-0"},Te={key:1,class:"py-8 text-center dark:text-gray-100"},$e={key:1,class:"py-8 text-center dark:text-gray-100"},Ie={class:"mb-3"},Re={class:"grid grid-cols-1 gap-3 dark:text-gray-100"},Ue={key:0,class:"grid grid-cols-1"},Ve=["innerHTML"],We={__name:"View",props:{errors:Object,success:{type:String},group:{type:Object},posts:Object,users:Array,requests:Array},setup(l){const m=f({thumbnail:null,cover:null}),h=y(!0),_=y(""),C=y(""),T=y(!1),P=y(""),$=j().props.auth.user,g=F(()=>d.group.role==="admin"),R=F(()=>d.group.role&&d.group.status==="approved"),d=l,U=f({name:j().props.group.name,auto_approval:!!parseInt(j().props.group.auto_approval),about:j().props.group.about});function G(n){if(m.cover=n.target.files[0],m.cover){const e=new FileReader;e.onload=()=>{_.value=e.result},e.readAsDataURL(m.cover)}}function z(n){if(m.thumbnail=n.target.files[0],m.thumbnail){const e=new FileReader;e.onload=()=>{C.value=e.result},e.readAsDataURL(m.thumbnail)}}function V(){m.cover=null,_.value=null}function A(){m.thumbnail=null,C.value=null}function O(){m.post(route("group.updateImages",d.group.slug),{preserveScroll:!0,onSuccess:()=>{h.value=!0,V(),setTimeout(()=>{h.value=!1},3e3)}})}function H(){m.post(route("group.updateImages",d.group.slug),{preserveScroll:!0,onSuccess:()=>{h.value=!0,A(),setTimeout(()=>{h.value=!1},3e3)}})}function q(){f({}).post(route("group.join",d.group.slug),{preserveScroll:!0})}function J(n){f({user_id:n.id,action:"approve"}).post(route("group.approveRequest",d.group.slug),{preserveScroll:!0})}function E(n){f({user_id:n.id,action:"reject"}).post(route("group.approveRequest",d.group.slug),{preserveScroll:!0})}function K(n){if(console.log("111"),!window.confirm(`Are you sure you want to remove user "${n.name}" from this group?`))return!1;f({user_id:n.id}).delete(route("group.removeUser",d.group.slug),{preserveScroll:!0})}function Y(n,e){console.log(n,e),f({user_id:n.id,role:e}).post(route("group.changeRole",d.group.slug),{preserveScroll:!0})}function Q(){U.put(route("group.update",d.group.slug),{preserveScroll:!0})}return(n,e)=>{const B=W("TabPhotos");return t(),i(b,null,[o(ee,null,{default:u(()=>[r("div",de,[r("div",pe,[X(r("div",{class:"my-2 py-2 px-3 font-medium text-sm bg-emerald-500 text-white"},I(l.success),513),[[Z,h.value&&l.success]]),l.errors.cover?(t(),i("div",me,I(l.errors.cover),1)):c("",!0),r("div",ge,[r("img",{src:_.value||l.group.cover_url||"/img/default-cover.jpg",class:"w-full h-[200px] object-cover"},null,8,fe),g.value?(t(),i("div",ve,[_.value?(t(),i("div",ye,[r("button",{onClick:V,class:"bg-gray-50 hover:bg-gray-100 text-gray-800 py-1 px-2 text-xs flex items-center"},[o(s(D),{class:"h-3 w-3 mr-2"}),e[3]||(e[3]=v(" Cancel "))]),r("button",{onClick:O,class:"bg-gray-800 hover:bg-gray-900 text-gray-100 py-1 px-2 text-xs flex items-center"},[o(s(N),{class:"h-3 w-3 mr-2"}),e[4]||(e[4]=v(" Submit "))])])):(t(),i("button",he,[e[2]||(e[2]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-3 h-3 mr-2"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})],-1)),r("input",{type:"file",class:"absolute left-0 top-0 bottom-0 right-0 opacity-0",onChange:G},null,32)]))])):c("",!0),r("div",be,[r("div",xe,[r("img",{src:C.value||l.group.thumbnail_url||"/img/default_avatar.jpg",class:"w-full h-full object-cover rounded-full"},null,8,ke),g.value&&!C.value?(t(),i("button",we,[o(s(ue),{class:"w-8 h-8"}),r("input",{type:"file",class:"absolute left-0 top-0 bottom-0 right-0 opacity-0",onChange:z},null,32)])):g.value?(t(),i("div",_e,[r("button",{onClick:A,class:"w-7 h-7 flex items-center justify-center bg-red-500/80 text-white rounded-full"},[o(s(D),{class:"h-5 w-5"})]),r("button",{onClick:H,class:"w-7 h-7 flex items-center justify-center bg-emerald-500/80 text-white rounded-full"},[o(s(N),{class:"h-5 w-5"})])])):c("",!0)]),r("div",Ce,[r("h2",je,I(l.group.name),1),s($)?c("",!0):(t(),p(S,{key:0,href:n.route("login")},{default:u(()=>e[5]||(e[5]=[v(" Login to join to this group ")])),_:1},8,["href"])),g.value?(t(),p(S,{key:1,onClick:e[0]||(e[0]=a=>T.value=!0)},{default:u(()=>e[6]||(e[6]=[v(" Invite Users ")])),_:1})):c("",!0),s($)&&!l.group.role&&l.group.auto_approval?(t(),p(S,{key:2,onClick:q},{default:u(()=>e[7]||(e[7]=[v(" Join to Group ")])),_:1})):c("",!0),s($)&&!l.group.role&&!l.group.auto_approval?(t(),p(S,{key:3,onClick:q},{default:u(()=>e[8]||(e[8]=[v(" Request to join ")])),_:1})):c("",!0)])])])]),r("div",Se,[o(s(ne),null,{default:u(()=>[o(s(ie),{class:"flex bg-white dark:bg-black dark:text-white"},{default:u(()=>[o(s(k),{as:"template"},{default:u(({selected:a})=>[o(x,{text:"Posts",selected:a},null,8,["selected"])]),_:1}),R.value?(t(),p(s(k),{key:0,as:"template"},{default:u(({selected:a})=>[o(x,{text:"Users",selected:a},null,8,["selected"])]),_:1})):c("",!0),g.value?(t(),p(s(k),{key:1,as:"template"},{default:u(({selected:a})=>[o(x,{text:"Pending Requests",selected:a},null,8,["selected"])]),_:1})):c("",!0),o(s(k),{as:"template"},{default:u(({selected:a})=>[o(x,{text:"Photos",selected:a},null,8,["selected"])]),_:1}),o(s(k),{as:"template"},{default:u(({selected:a})=>[o(x,{text:"About",selected:a},null,8,["selected"])]),_:1})]),_:1}),o(s(ce),{class:"mt-2"},{default:u(()=>[o(s(w),null,{default:u(()=>[l.posts?(t(),i(b,{key:0},[o(le,{group:l.group},null,8,["group"]),l.posts.data.length?(t(),p(se,{key:0,posts:l.posts.data,class:"flex-1"},null,8,["posts"])):(t(),i("div",Te," There are no posts in this group. Be the first and create it. "))],64)):(t(),i("div",$e," You don't have permission to view these posts. "))]),_:1}),R.value?(t(),p(s(w),{key:0},{default:u(()=>[r("div",Ie,[o(oe,{"model-value":P.value,placeholder:"Type to search",class:"w-full"},null,8,["model-value"])]),r("div",Re,[(t(!0),i(b,null,L(l.users,a=>(t(),p(M,{user:a,key:a.id,"show-role-dropdown":g.value,"disable-role-dropdown":l.group.user_id===a.id,class:"shadow rounded-lg",onRoleChange:Y,onDelete:K},null,8,["user","show-role-dropdown","disable-role-dropdown"]))),128))])]),_:1})):c("",!0),g.value?(t(),p(s(w),{key:1,class:""},{default:u(()=>[l.requests.length?(t(),i("div",Ue,[(t(!0),i(b,null,L(l.requests,a=>(t(),p(M,{user:a,key:a.id,"for-approve":!0,class:"shadow rounded-lg dark:text-gray-100",onApprove:J,onReject:E},null,8,["user"]))),128))])):c("",!0),e[9]||(e[9]=r("div",{class:"py-8 text-center dark:text-gray-100"}," There are no pending requests. ",-1))]),_:1})):c("",!0),o(s(w),null,{default:u(()=>[o(B,{photos:n.photos},null,8,["photos"])]),_:1}),o(s(w),null,{default:u(()=>[g.value?(t(),i(b,{key:0},[o(re,{form:s(U)},null,8,["form"]),o(ae,{onClick:Q},{default:u(()=>e[10]||(e[10]=[v(" Submit ")])),_:1})],64)):(t(),i("div",{key:1,class:"ck-content-output dark:text-gray-100",innerHTML:l.group.about},null,8,Ve))]),_:1})]),_:1})]),_:1})])])]),_:1}),o(te,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=a=>T.value=a)},null,8,["modelValue"])],64)}}};export{We as default};
