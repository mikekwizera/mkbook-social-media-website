import{f as y,o as h,b as u,i as $,z as U,B as J,s as H,h as D,D as le,y as se,E as re,H as Z,A as xe,a as p,w as C,u as f,P as W,g as A,e as T,t as M,F as z,I as Le,c as L,n as E,j as q,T as Fe,p as ae,d as we,r as He,k as Ne,C as ye,W as Ze}from"./app-ktTZm4lV.js";import{o as I,d as Ue,A as N,b as j,l as _e,g as V,N as G,i as Q,h as ke,a as ee,v as ze,e as fe,_ as Ce,w as qe,j as Ke,k as We,O as Qe,r as Ge}from"./transition-CcRS158C.js";import{b as Je,r as Xe,i as te,c as Ye,a as ne}from"./AttachmentPreviewModal-DcEB-VJa.js";import{r as et,_ as tt}from"./BaseModal-tc47qXzZ.js";function nt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"fill-rule":"evenodd",d:"M9.53 2.47a.75.75 0 0 1 0 1.06L4.81 8.25H15a6.75 6.75 0 0 1 0 13.5h-3a.75.75 0 0 1 0-1.5h3a5.25 5.25 0 1 0 0-10.5H4.81l4.72 4.72a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}function me(e,r){if(e)return e;let n=r??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function $e(e,r){let n=$(me(e.value.type,e.value.as));return U(()=>{n.value=me(e.value.type,e.value.as)}),J(()=>{var a;n.value||I(r)&&I(r)instanceof HTMLButtonElement&&!((a=I(r))!=null&&a.hasAttribute("type"))&&(n.value="button")}),n}function ve(e){return[e.screenX,e.screenY]}function ot(){let e=$([-1,-1]);return{wasMoved(r){let n=ve(r);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(r){e.value=ve(r)}}}function lt({container:e,accept:r,walk:n,enabled:a}){J(()=>{let o=e.value;if(!o||a!==void 0&&!a.value)return;let l=Ue(e);if(!l)return;let t=Object.assign(g=>r(g),{acceptNode:r}),i=l.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,t,!1);for(;i.nextNode();)n(i.currentNode)})}function st(e){throw new Error("Unexpected object: "+e)}var R=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(R||{});function rt(e,r){let n=r.resolveItems();if(n.length<=0)return null;let a=r.resolveActiveIndex(),o=a??-1;switch(e.focus){case 0:{for(let l=0;l<n.length;++l)if(!r.resolveDisabled(n[l],l,n))return l;return a}case 1:{o===-1&&(o=n.length);for(let l=o-1;l>=0;--l)if(!r.resolveDisabled(n[l],l,n))return l;return a}case 2:{for(let l=o+1;l<n.length;++l)if(!r.resolveDisabled(n[l],l,n))return l;return a}case 3:{for(let l=n.length-1;l>=0;--l)if(!r.resolveDisabled(n[l],l,n))return l;return a}case 4:{for(let l=0;l<n.length;++l)if(r.resolveId(n[l],l,n)===e.id)return l;return a}case 5:return null;default:st(e)}}var at=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(at||{});let Ie=Symbol("DisclosureContext");function ue(e){let r=re(Ie,null);if(r===null){let n=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ue),n}return r}let Se=Symbol("DisclosurePanelContext");function ut(){return re(Se,null)}let ie=H({name:"Disclosure",props:{as:{type:[Object,String],default:"template"},defaultOpen:{type:[Boolean],default:!1}},setup(e,{slots:r,attrs:n}){let a=$(e.defaultOpen?0:1),o=$(null),l=$(null),t={buttonId:$(`headlessui-disclosure-button-${Q()}`),panelId:$(`headlessui-disclosure-panel-${Q()}`),disclosureState:a,panel:o,button:l,toggleDisclosure(){a.value=ee(a.value,{0:1,1:0})},closeDisclosure(){a.value!==1&&(a.value=1)},close(i){t.closeDisclosure();let g=i?i instanceof HTMLElement?i:i.value instanceof HTMLElement?I(i):I(t.button):I(t.button);g==null||g.focus()}};return se(Ie,t),ke(D(()=>ee(a.value,{0:V.Open,1:V.Closed}))),()=>{let{defaultOpen:i,...g}=e,k={open:a.value===0,close:t.close};return N({theirProps:g,ourProps:{},slot:k,slots:r,attrs:n,name:"Disclosure"})}}}),ce=H({name:"DisclosureButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){let o=ue("DisclosureButton"),l=ut(),t=D(()=>l===null?!1:l.value===o.panelId.value);U(()=>{t.value||e.id!==null&&(o.buttonId.value=e.id)}),le(()=>{t.value||(o.buttonId.value=null)});let i=$(null);a({el:i,$el:i}),t.value||J(()=>{o.button.value=i.value});let g=$e(D(()=>({as:e.as,type:r.type})),i);function k(){var s;e.disabled||(t.value?(o.toggleDisclosure(),(s=I(o.button))==null||s.focus()):o.toggleDisclosure())}function _(s){var m;if(!e.disabled)if(t.value)switch(s.key){case j.Space:case j.Enter:s.preventDefault(),s.stopPropagation(),o.toggleDisclosure(),(m=I(o.button))==null||m.focus();break}else switch(s.key){case j.Space:case j.Enter:s.preventDefault(),s.stopPropagation(),o.toggleDisclosure();break}}function d(s){switch(s.key){case j.Space:s.preventDefault();break}}return()=>{var s;let m={open:o.disclosureState.value===0},{id:c,...v}=e,S=t.value?{ref:i,type:g.value,onClick:k,onKeydown:_}:{id:(s=o.buttonId.value)!=null?s:c,ref:i,type:g.value,"aria-expanded":o.disclosureState.value===0,"aria-controls":o.disclosureState.value===0||I(o.panel)?o.panelId.value:void 0,disabled:e.disabled?!0:void 0,onClick:k,onKeydown:_,onKeyup:d};return N({ourProps:S,theirProps:v,slot:m,attrs:r,slots:n,name:"DisclosureButton"})}}}),de=H({name:"DisclosurePanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){let o=ue("DisclosurePanel");U(()=>{e.id!==null&&(o.panelId.value=e.id)}),le(()=>{o.panelId.value=null}),a({el:o.panel,$el:o.panel}),se(Se,o.panelId);let l=_e(),t=D(()=>l!==null?(l.value&V.Open)===V.Open:o.disclosureState.value===0);return()=>{var i;let g={open:o.disclosureState.value===0,close:o.close},{id:k,..._}=e,d={id:(i=o.panelId.value)!=null?i:k,ref:o.panel};return N({ourProps:d,theirProps:_,slot:g,attrs:r,slots:n,features:G.RenderStrategy|G.Static,visible:t.value,name:"DisclosurePanel"})}}}),he=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ge(e){var r,n;let a=(r=e.innerText)!=null?r:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return a;let l=!1;for(let i of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),l=!0;let t=l?(n=o.innerText)!=null?n:"":a;return he.test(t)&&(t=t.replace(he,"")),t}function it(e){let r=e.getAttribute("aria-label");if(typeof r=="string")return r.trim();let n=e.getAttribute("aria-labelledby");if(n){let a=n.split(" ").map(o=>{let l=document.getElementById(o);if(l){let t=l.getAttribute("aria-label");return typeof t=="string"?t.trim():ge(l).trim()}return null}).filter(Boolean);if(a.length>0)return a.join(", ")}return ge(e).trim()}function ct(e){let r=$(""),n=$("");return()=>{let a=I(e);if(!a)return"";let o=a.innerText;if(r.value===o)return n.value;let l=it(a).trim().toLowerCase();return r.value=o,n.value=l,l}}var dt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(dt||{}),pt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(pt||{});function ft(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let De=Symbol("MenuContext");function X(e){let r=re(De,null);if(r===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,X),n}return r}let mt=H({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:r,attrs:n}){let a=$(1),o=$(null),l=$(null),t=$([]),i=$(""),g=$(null),k=$(1);function _(s=m=>m){let m=g.value!==null?t.value[g.value]:null,c=Qe(s(t.value.slice()),S=>I(S.dataRef.domRef)),v=m?c.indexOf(m):null;return v===-1&&(v=null),{items:c,activeItemIndex:v}}let d={menuState:a,buttonRef:o,itemsRef:l,items:t,searchQuery:i,activeItemIndex:g,activationTrigger:k,closeMenu:()=>{a.value=1,g.value=null},openMenu:()=>a.value=0,goToItem(s,m,c){let v=_(),S=rt(s===R.Specific?{focus:R.Specific,id:m}:{focus:s},{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});i.value="",g.value=S,k.value=c??1,t.value=v.items},search(s){let m=i.value!==""?0:1;i.value+=s.toLowerCase();let c=(g.value!==null?t.value.slice(g.value+m).concat(t.value.slice(0,g.value+m)):t.value).find(S=>S.dataRef.textValue.startsWith(i.value)&&!S.dataRef.disabled),v=c?t.value.indexOf(c):-1;v===-1||v===g.value||(g.value=v,k.value=1)},clearSearch(){i.value=""},registerItem(s,m){let c=_(v=>[...v,{id:s,dataRef:m}]);t.value=c.items,g.value=c.activeItemIndex,k.value=1},unregisterItem(s){let m=_(c=>{let v=c.findIndex(S=>S.id===s);return v!==-1&&c.splice(v,1),c});t.value=m.items,g.value=m.activeItemIndex,k.value=1}};return qe([o,l],(s,m)=>{var c;d.closeMenu(),Ke(m,We.Loose)||(s.preventDefault(),(c=I(o))==null||c.focus())},D(()=>a.value===0)),se(De,d),ke(D(()=>ee(a.value,{0:V.Open,1:V.Closed}))),()=>{let s={open:a.value===0,close:d.closeMenu};return N({ourProps:{},theirProps:e,slot:s,slots:r,attrs:n,name:"Menu"})}}}),vt=H({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){var o;let l=(o=e.id)!=null?o:`headlessui-menu-button-${Q()}`,t=X("MenuButton");a({el:t.buttonRef,$el:t.buttonRef});function i(d){switch(d.key){case j.Space:case j.Enter:case j.ArrowDown:d.preventDefault(),d.stopPropagation(),t.openMenu(),Z(()=>{var s;(s=I(t.itemsRef))==null||s.focus({preventScroll:!0}),t.goToItem(R.First)});break;case j.ArrowUp:d.preventDefault(),d.stopPropagation(),t.openMenu(),Z(()=>{var s;(s=I(t.itemsRef))==null||s.focus({preventScroll:!0}),t.goToItem(R.Last)});break}}function g(d){switch(d.key){case j.Space:d.preventDefault();break}}function k(d){e.disabled||(t.menuState.value===0?(t.closeMenu(),Z(()=>{var s;return(s=I(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(d.preventDefault(),t.openMenu(),ft(()=>{var s;return(s=I(t.itemsRef))==null?void 0:s.focus({preventScroll:!0})})))}let _=$e(D(()=>({as:e.as,type:r.type})),t.buttonRef);return()=>{var d;let s={open:t.menuState.value===0},{...m}=e,c={ref:t.buttonRef,id:l,type:_.value,"aria-haspopup":"menu","aria-controls":(d=I(t.itemsRef))==null?void 0:d.id,"aria-expanded":t.menuState.value===0,onKeydown:i,onKeyup:g,onClick:k};return N({ourProps:c,theirProps:m,slot:s,attrs:r,slots:n,name:"MenuButton"})}}}),ht=H({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){var o;let l=(o=e.id)!=null?o:`headlessui-menu-items-${Q()}`,t=X("MenuItems"),i=$(null);a({el:t.itemsRef,$el:t.itemsRef}),lt({container:D(()=>I(t.itemsRef)),enabled:D(()=>t.menuState.value===0),accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});function g(s){var m;switch(i.value&&clearTimeout(i.value),s.key){case j.Space:if(t.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),t.search(s.key);case j.Enter:if(s.preventDefault(),s.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(m=I(c.dataRef.domRef))==null||m.click()}t.closeMenu(),Ce(I(t.buttonRef));break;case j.ArrowDown:return s.preventDefault(),s.stopPropagation(),t.goToItem(R.Next);case j.ArrowUp:return s.preventDefault(),s.stopPropagation(),t.goToItem(R.Previous);case j.Home:case j.PageUp:return s.preventDefault(),s.stopPropagation(),t.goToItem(R.First);case j.End:case j.PageDown:return s.preventDefault(),s.stopPropagation(),t.goToItem(R.Last);case j.Escape:s.preventDefault(),s.stopPropagation(),t.closeMenu(),Z(()=>{var c;return(c=I(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case j.Tab:s.preventDefault(),s.stopPropagation(),t.closeMenu(),Z(()=>ze(I(t.buttonRef),s.shiftKey?fe.Previous:fe.Next));break;default:s.key.length===1&&(t.search(s.key),i.value=setTimeout(()=>t.clearSearch(),350));break}}function k(s){switch(s.key){case j.Space:s.preventDefault();break}}let _=_e(),d=D(()=>_!==null?(_.value&V.Open)===V.Open:t.menuState.value===0);return()=>{var s,m;let c={open:t.menuState.value===0},{...v}=e,S={"aria-activedescendant":t.activeItemIndex.value===null||(s=t.items.value[t.activeItemIndex.value])==null?void 0:s.id,"aria-labelledby":(m=I(t.buttonRef))==null?void 0:m.id,id:l,onKeydown:g,onKeyup:k,role:"menu",tabIndex:0,ref:t.itemsRef};return N({ourProps:S,theirProps:v,slot:c,attrs:r,slots:n,features:G.RenderStrategy|G.Static,visible:d.value,name:"MenuItems"})}}}),K=H({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:r,attrs:n,expose:a}){var o;let l=(o=e.id)!=null?o:`headlessui-menu-item-${Q()}`,t=X("MenuItem"),i=$(null);a({el:i,$el:i});let g=D(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===l:!1),k=ct(i),_=D(()=>({disabled:e.disabled,get textValue(){return k()},domRef:i}));U(()=>t.registerItem(l,_)),le(()=>t.unregisterItem(l)),J(()=>{t.menuState.value===0&&g.value&&t.activationTrigger.value!==0&&Z(()=>{var x,O;return(O=(x=I(i))==null?void 0:x.scrollIntoView)==null?void 0:O.call(x,{block:"nearest"})})});function d(x){if(e.disabled)return x.preventDefault();t.closeMenu(),Ce(I(t.buttonRef))}function s(){if(e.disabled)return t.goToItem(R.Nothing);t.goToItem(R.Specific,l)}let m=ot();function c(x){m.update(x)}function v(x){m.wasMoved(x)&&(e.disabled||g.value||t.goToItem(R.Specific,l,0))}function S(x){m.wasMoved(x)&&(e.disabled||g.value&&t.goToItem(R.Nothing))}return()=>{let{disabled:x,...O}=e,Y={active:g.value,disabled:x,close:t.closeMenu};return N({ourProps:{id:l,ref:i,role:"menuitem",tabIndex:x===!0?void 0:-1,"aria-disabled":x===!0?!0:void 0,onClick:d,onFocus:s,onPointerenter:c,onMouseenter:c,onPointermove:v,onMousemove:v,onPointerleave:S,onMouseleave:S},theirProps:{...n,...O},slot:Y,attrs:n,slots:r,name:"MenuItem"})}}});const gt=["value","placeholder"],oe={__name:"InputTextarea",props:{modelValue:{type:String,required:!0},placeholder:String,autoResize:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{expose:r,emit:n}){const a=e,o=n,l=$(null);U(()=>{l.value.hasAttribute("autofocus")&&l.value.focus()}),xe(()=>a.modelValue,()=>{console.log("Changed"),setTimeout(()=>{i()},10)}),r({focus:()=>l.value.focus()});function t(g){o("update:modelValue",g.target.value)}function i(){a.autoResize&&(l.value.style.height="auto",l.value.style.height=l.value.scrollHeight+1+"px")}return U(()=>{i()}),(g,k)=>(h(),y("textarea",{class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm",value:e.modelValue,onInput:t,ref_key:"input",ref:l,placeholder:e.placeholder},null,40,gt))}};function bt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.068.157 2.148.279 3.238.364.466.037.893.281 1.153.671L12 21l2.652-3.978c.26-.39.687-.634 1.153-.67 1.09-.086 2.17-.208 3.238-.365 1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function xt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"})])}function wt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"})])}function Me(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})])}function Pe(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})])}function yt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})])}const _t={class:"flex items-center gap-2"},kt=["src"],Ct={class:"flex items-center font-bold"},$t={key:0,class:"text-gray-400"},je={__name:"PostUserHeader",props:{post:{type:Object},showTime:{type:Boolean,default:!0}},setup(e){return(r,n)=>(h(),y("div",_t,[p(f(W),{href:r.route("profile",e.post.user.username)},{default:C(()=>[u("img",{src:e.post.user.avatar_url,class:"w-[30px] rounded-full border border-2 transition-all hover:border-blue-500"},null,8,kt)]),_:1},8,["href"]),u("div",null,[u("h4",Ct,[p(f(W),{href:r.route("profile",e.post.user.username),class:"hover:underline pt-3"},{default:C(()=>[T(M(e.post.user.name),1)]),_:1},8,["href"]),e.post.group?(h(),y(z,{key:0},[p(f(Je),{class:"w-4 pt-3"}),p(f(W),{href:r.route("group.profile",e.post.group.slug),class:"hover:underline pt-3"},{default:C(()=>[T(M(e.post.group.name),1)]),_:1},8,["href"])],64)):A("",!0)]),e.showTime?(h(),y("small",$t,M(e.post.updated_at),1)):A("",!0)])]))}},F=Le.create();F.interceptors.request.use(function(e){return e});const It=["innerHTML"],St=["innerHTML"],Dt={class:"mt-0 flex justify-end"},Te={__name:"ReadMoreReadLess",props:{content:String,contentClass:String},setup(e){return(r,n)=>(h(),L(f(ie),null,{default:C(({open:a})=>[a?A("",!0):(h(),y("div",{key:0,class:E(["ck-content-output",e.contentClass]),innerHTML:e.content.substring(0,200)},null,10,It)),e.content&&e.content.length>200?(h(),y(z,{key:1},[p(f(de),null,{default:C(()=>[u("div",{class:E(["ck-content-output",e.contentClass]),innerHTML:e.content},null,10,St)]),_:1}),u("div",Dt,[p(f(ce),{class:"text-blue-500 hover:underline"},{default:C(()=>[T(M(a?"See less":"See more"),1)]),_:2},1024)])],64)):A("",!0)]),_:1}))}};function Mt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"})])}function Pt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"}),u("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 0 1 0-1.186A10.004 10.004 0 0 1 10 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0 1 10 17c-4.257 0-7.893-2.66-9.336-6.41ZM14 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z","clip-rule":"evenodd"})])}function jt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"})])}function Tt(e,r){return h(),y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[u("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z","clip-rule":"evenodd"})])}const Et={class:"px-1 py-1"},Ee={__name:"EditDeleteDropdown",props:{post:{type:Object,default:null},comment:{type:Object,default:null}},emits:["edit","delete","pin"],setup(e){const r=e,n=q().props.auth.user,a=q().props.group,o=D(()=>{var _,d;return((_=r.comment)==null?void 0:_.user)||((d=r.post)==null?void 0:d.user)}),l=D(()=>o.value.id===n.id),t=D(()=>o.value.id===n.id||r.post.group&&r.post.group.role==="admin"),i=D(()=>a!=null&&a.id?(a==null?void 0:a.pinned_post_id)===r.post.id:(n==null?void 0:n.pinned_post_id)===r.post.id),g=D(()=>{var _;return o.value.id===n.id||r.post.user.id===n.id?!0:!r.comment&&((_=r.post.group)==null?void 0:_.role)==="admin"});function k(){const _=route("post.view",r.post.id),d=document.createElement("input");d.value=_,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d)}return(_,d)=>(h(),L(f(mt),{as:"div",class:"relative inline-block text-left"},{default:C(()=>[u("div",null,[p(f(vt),{class:"w-8 h-8 z-10 rounded-full hover:bg-black/5 transition flex items-center justify-center"},{default:C(()=>[p(f(Mt),{class:"w-5 h-5","aria-hidden":"true"})]),_:1})]),p(Fe,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:C(()=>[p(f(ht),{class:"absolute z-20 right-0 mt-2 w-48 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:C(()=>[u("div",Et,[p(f(K),null,{default:C(({active:s})=>[p(f(W),{href:_.route("post.view",e.post.id),class:E([s?"bg-indigo-500 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},{default:C(()=>[p(f(Pt),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),d[3]||(d[3]=T(" Open Post "))]),_:2},1032,["href","class"])]),_:1}),p(f(K),null,{default:C(({active:s})=>[u("button",{onClick:k,class:E([s?"bg-indigo-500 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p(f(wt),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),d[4]||(d[4]=T(" Copy Post URL "))],2)]),_:1}),t.value?(h(),L(f(K),{key:0},{default:C(({active:s})=>[u("button",{onClick:d[0]||(d[0]=m=>_.$emit("pin")),class:E([s?"bg-indigo-500 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p(f(Pe),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),T(" "+M(i.value?"Unpin":"Pin"),1)],2)]),_:1})):A("",!0),l.value?(h(),L(f(K),{key:1},{default:C(({active:s})=>[u("button",{onClick:d[1]||(d[1]=m=>_.$emit("edit")),class:E([s?"bg-indigo-500 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p(f(jt),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),d[5]||(d[5]=T(" Edit "))],2)]),_:1})):A("",!0),g.value?(h(),L(f(K),{key:2},{default:C(({active:s})=>[u("button",{onClick:d[2]||(d[2]=m=>_.$emit("delete")),class:E([s?"bg-indigo-500 text-white":"text-gray-900","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p(f(Tt),{class:"mr-2 h-5 w-5","aria-hidden":"true"}),d[6]||(d[6]=T(" Delete "))],2)]),_:1})):A("",!0)])]),_:1})]),_:1})]),_:1}))}},At=["onClick"],Rt={key:0,class:"absolute left-0 top-0 right-0 bottom-0 z-10 bg-black/60 text-white flex items-center justify-center text-2xl"},Ot=["href"],Bt=["src"],Vt={key:2,class:"relative flex justify-center items-center"},Lt=["src"],Ft={key:3,class:"flex flex-col justify-center items-center"},Ht={__name:"PostAttachments",props:{attachments:Array},emits:["attachmentClick"],setup(e){return(r,n)=>(h(!0),y(z,null,ae(e.attachments.slice(0,4),(a,o)=>(h(),y("div",{onClick:l=>r.$emit("attachmentClick",o),class:"group aspect-square bg-blue-100 flex flex-col items-center justify-center text-gray-500 relative cursor-pointer"},[o===3&&e.attachments.length>4?(h(),y("div",Rt," +"+M(e.attachments.length-4)+" more ",1)):A("",!0),u("a",{onClick:n[0]||(n[0]=we(()=>{},["stop"])),href:r.route("post.download",a),class:"z-20 opacity-0 group-hover:opacity-100 transition-all w-8 h-8 flex items-center justify-center text-gray-100 bg-gray-700 rounded absolute right-2 top-2 cursor-pointer hover:bg-gray-800"},[p(f(Xe),{class:"w-4 h-4"})],8,Ot),f(te)(a)?(h(),y("img",{key:1,src:a.url,class:"object-contain aspect-square"},null,8,Bt)):f(Ye)(a)?(h(),y("div",Vt,[n[1]||(n[1]=u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"z-20 absolute w-16 h-16 text-gray-800 text-white opacity-70"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),u("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"})],-1)),n[2]||(n[2]=u("div",{class:"absolute left-0 top-0 w-full h-full bg-black/50 z-10"},null,-1)),u("video",{src:a.url},null,8,Lt)])):(h(),y("div",Ft,[p(f(ne),{class:"w-10 h-10 mb-3"}),u("small",null,M(a.name),1)]))],8,At))),256))}},Nt=["type"],be={__name:"IndigoButton",props:{type:{type:String,default:"button"}},setup(e){return(r,n)=>(h(),y("button",{type:e.type,class:"flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 relative"},[He(r.$slots,"default")],8,Nt))}},Zt={class:"flex gap-2 mb-3"},Ut=["src"],zt={class:"flex flex-1"},qt={class:"flex justify-between gap-2"},Kt={class:"flex gap-2"},Wt={href:"javascript:void(0)"},Qt=["src"],Gt={class:"font-bold"},Jt={href:"javascript:void(0)",class:"hover:underline"},Xt={class:"text-xs text-gray-400"},Yt={class:"pl-12"},en={key:0},tn={class:"flex gap-2 justify-end"},nn={class:"mt-1 flex gap-2"},on=["onClick"],ln={class:"mr-2"},sn={class:"mr-2"},rn={__name:"CommentList",props:{post:Object,data:Object,parentComment:{type:[Object,null],default:null}},emits:["commentCreate","commentDelete"],setup(e,{emit:r}){const n=q().props.auth.user,a=$(""),o=$(null),l=e,t=r;function i(c){console.log(c),o.value={id:c.id,comment:c.comment.replace(/<br\s*\/?>/gi,`
`)}}function g(){var c;F.post(route("post.comment.create",l.post),{comment:a.value,parent_id:((c=l.parentComment)==null?void 0:c.id)||null}).then(({data:v})=>{a.value="",l.data.comments.unshift(v),l.parentComment&&l.parentComment.num_of_comments++,l.post.num_of_comments++,t("commentCreate",v)})}function k(c){if(!window.confirm("Are you sure you want to delete this comment?"))return!1;F.delete(route("comment.delete",c.id)).then(({data:v})=>{console.log(l.data.comments);const S=l.data.comments.findIndex(x=>x.id===c.id);l.data.comments.splice(S,1),console.log(l.data.comments),l.parentComment&&l.parentComment.num_of_comments--,l.post.num_of_comments--,t("commentDelete",c)})}function _(){F.put(route("comment.update",o.value.id),o.value).then(({data:c})=>{o.value=null,l.data.comments=l.data.comments.map(v=>v.id===c.id?c:v)})}function d(c){F.post(route("comment.reaction",c.id),{reaction:"like"}).then(({data:v})=>{c.current_user_has_reaction=v.current_user_has_reaction,c.num_of_reactions=v.num_of_reactions})}function s(c){l.parentComment&&l.parentComment.num_of_comments++,t("commentCreate",c)}function m(c){l.parentComment&&l.parentComment.num_of_comments--,t("commentDelete",c)}return(c,v)=>{const S=Ne("CommentList",!0);return h(),y(z,null,[u("div",Zt,[p(f(W),{href:c.route("profile",f(n).username)},{default:C(()=>[u("img",{src:f(n).avatar_url,class:"w-[30px] rounded-full border border-2 transition-all hover:border-blue-500"},null,8,Ut)]),_:1},8,["href"]),u("div",zt,[p(oe,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=x=>a.value=x),placeholder:"Enter your comment here",rows:"1",class:"w-full max-h-[160px] resize-none rounded-r-none"},null,8,["modelValue"]),p(be,{onClick:g,class:"rounded-l-none w-[100px]"},{default:C(()=>[p(f(yt),{class:"w-6 h-6"})]),_:1})])]),u("div",null,[(h(!0),y(z,null,ae(e.data.comments,x=>(h(),y("div",{key:x.id,class:"mb-4"},[u("div",qt,[u("div",Kt,[u("a",Wt,[u("img",{src:x.user.avatar_url,class:"w-[25px] rounded-full border border-2 transition-all hover:border-blue-500"},null,8,Qt)]),u("div",null,[u("h4",Gt,[u("a",Jt,M(x.user.name),1)]),u("small",Xt,M(x.updated_at),1)])]),p(Ee,{user:x.user,post:e.post,comment:x,onEdit:O=>i(x),onDelete:O=>k(x)},null,8,["user","post","comment","onEdit","onDelete"])]),u("div",Yt,[o.value&&o.value.id===x.id?(h(),y("div",en,[p(oe,{modelValue:o.value.comment,"onUpdate:modelValue":O=>o.value.comment=O,placeholder:"Enter your comment here",rows:"1",class:"w-full max-h-[160px] resize-none"},null,8,["modelValue","onUpdate:modelValue"]),u("div",tn,[u("button",{onClick:v[1]||(v[1]=O=>o.value=null),class:"rounded-r-none text-indigo-500"},"cancel "),p(be,{onClick:_,class:"w-[100px]"},{default:C(()=>v[2]||(v[2]=[T("update ")])),_:1})])])):(h(),L(Te,{key:1,content:x.comment,"content-class":"text-sm flex flex-1"},null,8,["content"])),p(f(ie),null,{default:C(()=>[u("div",nn,[u("button",{onClick:O=>d(x),class:E(["flex items-center text-xs text-indigo-500 py-0.5 px-1 rounded-lg",[x.current_user_has_reaction?"bg-indigo-50 hover:bg-indigo-100":"hover:bg-indigo-50"]])},[p(f(Me),{class:"w-3 h-3 mr-1"}),u("span",ln,M(x.num_of_reactions),1),T(" "+M(x.current_user_has_reaction?"unlike":"like"),1)],10,on),p(f(ce),{class:"flex items-center text-xs text-indigo-500 py-0.5 px-1 hover:bg-indigo-100 rounded-lg"},{default:C(()=>[p(f(xt),{class:"w-3 h-3 mr-1"}),u("span",sn,M(x.num_of_comments),1),v[3]||(v[3]=T(" reply "))]),_:2},1024)]),p(f(de),{class:"mt-3"},{default:C(()=>[p(S,{post:e.post,data:{comments:x.comments},"parent-comment":x,onCommentCreate:s,onCommentDelete:m},null,8,["post","data","parent-comment"])]),_:2},1024)]),_:2},1024)])]))),128))])],64)}}},an=["href"],un=["src","alt"],cn={class:"p-2"},dn={class:"font-semibold"},pn={class:"text-sm m-none"},fn=["href"],mn={class:"p-2"},Ae={__name:"UrlPreview",props:{preview:Object,url:String},setup(e){return(r,n)=>e.preview&&e.preview.title?(h(),y("a",{key:0,href:e.url,target:"_blank",class:"block mt-4 border border-indigo-200 bg-indigo-50"},[u("img",{src:e.preview.image,class:"max-w-full",alt:e.preview.title},null,8,un),u("div",cn,[u("h3",dn,M(e.preview.title),1),u("p",pn,M(e.preview.description),1)])],8,an)):e.url?(h(),y("a",{key:1,href:e.url,target:"_blank",class:"block mt-4 border border-indigo-200 bg-indigo-50"},[u("div",mn,M(e.url),1)],8,fn)):A("",!0)}},vn={class:"bg-white border dark:bg-black dark:border-slate-900 dark:text-gray-100 rounded p-4 mb-3"},hn={class:"flex items-center justify-between mb-3"},gn={class:"flex items-center gap-2"},bn={key:0,class:"flex items-center text-xs"},xn={class:"mb-3"},wn={class:"flex gap-2"},yn={class:"mr-1"},_n={class:"mr-2"},Ln={__name:"PostItem",props:{post:Object},emits:["editClick","attachmentClick"],setup(e,{emit:r}){const n=e,a=q().props.auth.user,o=q().props.group,l=r,t=D(()=>n.post.body.replace(/(?:(\s+)|<p>)((#\w+)(?![^<]*<\/a>))/g,(c,v,S)=>{const x=encodeURIComponent(S);return`${v||""}<a href="/search/${x}" class="hashtag">${S}</a>`})),i=D(()=>o!=null&&o.id?(o==null?void 0:o.pinned_post_id)===n.post.id:(a==null?void 0:a.pinned_post_id)===n.post.id);function g(){l("editClick",n.post)}function k(){window.confirm("Are you sure you want to delete this post?")&&Ze.delete(route("post.destroy",n.post),{preserveScroll:!0})}function _(){const m=ye({forGroup:o==null?void 0:o.id});let c=!1;o!=null&&o.id?c=(o==null?void 0:o.pinned_post_id)===n.post.id:c=(a==null?void 0:a.pinned_post_id)===n.post.id,m.post(route("post.pinUnpin",n.post.id),{preserveScroll:!0,onSuccess:()=>{o!=null&&o.id?o.pinned_post_id=c?null:n.post.id:a.pinned_post_id=c?null:n.post.id}})}function d(m){l("attachmentClick",n.post,m)}function s(){F.post(route("post.reaction",n.post),{reaction:"like"}).then(({data:m})=>{n.post.current_user_has_reaction=m.current_user_has_reaction,n.post.num_of_reactions=m.num_of_reactions})}return(m,c)=>(h(),y("div",vn,[u("div",hn,[p(je,{post:e.post},null,8,["post"]),u("div",gn,[i.value?(h(),y("div",bn,[p(f(Pe),{class:"h-3 w-3","aria-hidden":"true"}),c[0]||(c[0]=T(" pinned "))])):A("",!0),p(Ee,{user:e.post.user,post:e.post,onEdit:g,onDelete:k,onPin:_},null,8,["user","post"])])]),u("div",xn,[p(Te,{content:t.value},null,8,["content"]),p(Ae,{preview:e.post.preview,url:e.post.preview_url},null,8,["preview","url"])]),u("div",{class:E(["grid gap-3 mb-3",[e.post.attachments.length===1?"grid-cols-1":"grid-cols-2"]])},[p(Ht,{attachments:e.post.attachments,onAttachmentClick:d},null,8,["attachments"])],2),p(f(ie),null,{default:C(({open:v})=>[u("div",wn,[u("button",{onClick:s,class:E(["text-gray-800 dark:text-gray-100 flex items-center justify-center py-1 px-4 rounded-full",[e.post.current_user_has_reaction?"bg-sky-100 dark:bg-sky-900 hover:bg-sky-200 dark:hover:bg-sky-950":"bg-gray-100 dark:bg-slate-800 dark:bg-slate-900 dark:hover:bg-slate-800 "]])},[p(f(Me),{class:"w-4 h-4"}),u("span",yn,M(e.post.num_of_reactions),1),c[1]||(c[1]=T(" Like "))],2),p(f(ce),{class:"text-gray-800 dark:text-gray-100 flex gap-1 items-center justify-center bg-gray-100 dark:bg-slate-900 dark:hover:bg-slate-800 rounded-full hover:bg-gray-200 py-1 px-4"},{default:C(()=>[u("span",_n,M(e.post.num_of_comments),1),p(f(bt),{class:"w-4 h-4"}),c[2]||(c[2]=T(" Comment "))]),_:1})]),p(f(de),{class:"comment-list mt-3 max-h-[400px] overflow-auto"},{default:C(()=>[p(rn,{post:e.post,data:{comments:e.post.comments}},null,8,["post","data"])]),_:1})]),_:1})]))}},kn={class:"p-4"},Cn={key:0,class:"bg-red-400 py-2 px-3 rounded text-white mb-3"},$n={class:"relative group"},In={key:1,class:"border-l-4 border-amber-500 py-2 px-3 bg-amber-100 mt-3 text-gray-800"},Sn={key:2,class:"border-l-4 border-red-500 py-2 px-3 bg-red-100 mt-3 text-gray-800"},Dn={key:0,class:"absolute z-10 left-0 bottom-0 right-0 py-2 px-3 text-sm bg-black text-white flex justify-between items-center"},Mn=["onClick"],Pn=["src"],jn={class:"text-center"},Tn={class:"text-red-500"},En={class:"flex gap-2 py-3 px-4"},An={type:"button",class:"flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 w-full relative"},Fn={__name:"PostModal",props:{post:{type:Object,required:!0},group:{type:Object,default:null},modelValue:Boolean},emits:["update:modelValue","hide"],setup(e,{emit:r}){const n=e,a=q().props.attachmentExtensions,o=$([]),l=$([]),t=$({}),i=ye({body:"",group_id:null,attachments:[],deleted_file_ids:[],preview:{},preview_url:null,_method:"POST"}),g=D({get:()=>n.modelValue,set:b=>d("update:modelValue",b)}),k=D(()=>[...o.value,...n.post.attachments||[]]),_=D(()=>{for(let b of o.value){let B=b.file.name.split(".").pop().toLowerCase();if(!a.includes(B))return!0}return!1}),d=r;xe(()=>n.post,()=>{i.body=n.post.body||"",pe()});function s(){g.value=!1,d("hide"),m()}function m(){i.reset(),t.value={},o.value=[],l.value=[],n.post.attachments&&n.post.attachments.forEach(b=>b.deleted=!1)}function c(){n.group&&(i.group_id=n.group.id),i.attachments=o.value.map(b=>b.file),n.post.id?(i._method="PUT",i.post(route("post.update",n.post.id),{preserveScroll:!0,onSuccess:b=>{console.log(b),s()},onError:b=>{v(b)}})):i.post(route("post.create"),{preserveScroll:!0,onSuccess:b=>{s()},onError:b=>{v(b)}})}function v(b){t.value=b;for(const w in b)if(w.includes(".")){const[,P]=w.split(".");l.value[P]=b[w]}}async function S(b){for(const w of b.target.files){const P={file:w,url:await x(w)};o.value.push(P)}b.target.value=null}async function x(b){return new Promise((w,P)=>{if(te(b)){const B=new FileReader;B.onload=()=>{w(B.result)},B.onerror=P,B.readAsDataURL(b)}else w(null)})}function O(b){b.file?o.value=o.value.filter(w=>w!==b):(i.deleted_file_ids.push(b.id),b.deleted=!0)}function Y(b){b.deleted=!1,i.deleted_file_ids=i.deleted_file_ids.filter(w=>b.id!==w)}function Re(b){b!==i.preview_url&&(i.preview_url=b,i.preview={},b&&F.post(route("post.fetchUrlPreview"),{url:b}).then(({data:w})=>{i.preview={title:w["og:title"],description:w["og:description"],image:w["og:image"]}}).catch(w=>{console.log(w)}))}function pe(){let b=Oe();b||(b=Be()),Re(b)}function Oe(){const b=/<a.+href="((https?):\/\/[^"]+)"/,w=i.body.match(b);return w&&w.length>0?w[1]:null}function Be(){const b=/(?:https?):\/\/[^\s<]+/,w=i.body.match(b);return w&&w.length>0?w[0]:null}return(b,w)=>(h(),L(tt,{title:e.post.id?"Update Post":"Create Post",modelValue:g.value,"onUpdate:modelValue":w[2]||(w[2]=P=>g.value=P),class:"dark:text-gray-100",onHide:s},{default:C(()=>[u("div",kn,[p(je,{post:e.post,"show-time":!1,class:"mb-4 dark:text-gray-100"},null,8,["post"]),t.value.group_id?(h(),y("div",Cn,M(t.value.group_id),1)):A("",!0),u("div",$n,[p(oe,{modelValue:f(i).body,"onUpdate:modelValue":w[0]||(w[0]=P=>f(i).body=P),class:"mb-3 w-full",onInput:pe},null,8,["modelValue"]),p(Ae,{preview:f(i).preview,url:f(i).preview_url},null,8,["preview","url"])]),_.value?(h(),y("div",In,[w[3]||(w[3]=T(" Files must be one of the following extensions ")),w[4]||(w[4]=u("br",null,null,-1)),u("small",null,M(f(a).join(", ")),1)])):A("",!0),t.value.attachments?(h(),y("div",Sn,M(t.value.attachments),1)):A("",!0),u("div",{class:E(["grid gap-3 my-3",[k.value.length===1?"grid-cols-1":"grid-cols-2"]])},[(h(!0),y(z,null,ae(k.value,(P,B)=>(h(),y("div",null,[u("div",{class:E(["group aspect-square bg-blue-100 flex flex-col items-center justify-center text-gray-500 relative border-2",l.value[B]?"border-red-500":""])},[P.deleted?(h(),y("div",Dn,[w[5]||(w[5]=T(" To be deleted ")),p(f(nt),{onClick:Ve=>Y(P),class:"w-4 h-4 cursor-pointer"},null,8,["onClick"])])):A("",!0),u("button",{onClick:Ve=>O(P),class:"absolute z-20 right-3 top-3 w-7 h-7 flex items-center justify-center bg-black/30 text-white rounded-full hover:bg-black/40"},[p(f(Ge),{class:"h-5 w-5"})],8,Mn),f(te)(P.file||P)?(h(),y("img",{key:1,src:P.url,class:E(["object-contain aspect-square",P.deleted?"opacity-50":""])},null,10,Pn)):(h(),y("div",{key:2,class:E(["flex flex-col justify-center items-center px-3",P.deleted?"opacity-50":""])},[p(f(ne),{class:"w-10 h-10 mb-3"}),u("small",jn,M((P.file||P).name),1)],2)),u("small",Tn,M(l.value[B]),1)],2)]))),256))],2)]),u("div",En,[u("button",An,[p(f(ne),{class:"w-4 h-4 mr-2"}),w[6]||(w[6]=T(" Attach Files ")),u("input",{onClick:w[1]||(w[1]=we(()=>{},["stop"])),onChange:S,type:"file",multiple:"",class:"absolute left-0 top-0 right-0 bottom-0 opacity-0"},null,32)]),u("button",{type:"button",class:"flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 w-full",onClick:c},[p(f(et),{class:"w-4 h-4 mr-2"}),w[7]||(w[7]=T(" Submit "))])])]),_:1},8,["title","modelValue"]))}};export{ie as N,ce as Q,de as V,be as _,oe as a,Ln as b,Fn as c,F as i,$e as s};
